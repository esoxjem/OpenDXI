<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title><%= content_for(:title) || "OpenDXI Dashboard" %></title>
    <meta name="description" content="Developer Experience Index Dashboard">

    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%# Favicon %>
    <link rel="icon" href="/favicon.ico" type="image/x-icon">

    <%# Tailwind CSS %>
    <%= stylesheet_link_tag "tailwind", "data-turbo-track": "reload" %>

    <%# JavaScript with importmap %>
    <%= javascript_importmap_tags %>
  </head>

  <body class="min-h-screen bg-background text-foreground">
    <%# Flash messages %>
    <% if notice %>
      <div class="fixed top-4 right-4 z-50 p-4 rounded-lg bg-card border shadow-lg" data-controller="flash" data-flash-dismiss-after-value="5000">
        <div class="flex items-center gap-2">
          <span class="text-success">✓</span>
          <span><%= notice %></span>
          <button type="button" data-action="flash#dismiss" class="ml-2 text-muted-foreground hover:text-foreground">×</button>
        </div>
      </div>
    <% end %>

    <% if alert %>
      <div class="fixed top-4 right-4 z-50 p-4 rounded-lg bg-card border shadow-lg">
        <div class="flex items-center gap-2">
          <span class="text-destructive">!</span>
          <span><%= alert %></span>
          <button type="button" onclick="this.closest('div.fixed').remove()" class="ml-2 text-muted-foreground hover:text-foreground">×</button>
        </div>
      </div>
    <% end %>

    <%= yield %>
  </body>
</html>
