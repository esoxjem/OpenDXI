<% content_for :title, "Dashboard | OpenDXI" %>

<div class="container mx-auto py-6 px-4">
  <%= render "shared/header" %>

  <%# Tabs Navigation - matches shadcn Tabs styling %>
  <div class="flex flex-col gap-2">
    <div class="bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]">
      <%= link_to dashboard_path(tab: "team", sprint: params[:sprint]),
          class: "inline-flex h-[calc(100%-1px)] items-center justify-center rounded-md px-3 py-1 text-sm font-medium transition-all
            #{@tab == 'team' ? 'bg-background text-foreground shadow-sm' : 'text-muted-foreground hover:text-foreground'}" do %>
        Team Overview
      <% end %>
      <%= link_to dashboard_path(tab: "developers", sprint: params[:sprint]),
          class: "inline-flex h-[calc(100%-1px)] items-center justify-center rounded-md px-3 py-1 text-sm font-medium transition-all
            #{@tab == 'developers' ? 'bg-background text-foreground shadow-sm' : 'text-muted-foreground hover:text-foreground'}" do %>
        Developers
      <% end %>
      <%= link_to dashboard_path(tab: "history", sprint: params[:sprint]),
          class: "inline-flex h-[calc(100%-1px)] items-center justify-center rounded-md px-3 py-1 text-sm font-medium transition-all
            #{@tab == 'history' ? 'bg-background text-foreground shadow-sm' : 'text-muted-foreground hover:text-foreground'}" do %>
        History
      <% end %>
    </div>

    <%# Tab Content %>
    <turbo-frame id="main-content" class="flex-1 mt-4">
      <% case @tab %>
      <% when "team" %>
        <%= render "dashboard/team_overview" %>
      <% when "developers" %>
        <% if @selected_developer %>
          <%= render "dashboard/developer_detail", developer: @selected_developer %>
        <% else %>
          <%= render "dashboard/developers_grid" %>
        <% end %>
      <% when "history" %>
        <%= render "dashboard/history" %>
      <% end %>
    </turbo-frame>
  </div>
</div>
